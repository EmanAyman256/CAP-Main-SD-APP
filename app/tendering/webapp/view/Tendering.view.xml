<mvc:View
    controllerName="tendering.controller.Tendering"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.ui.table"
    xmlns:m="sap.m"
    xmlns:l="sap.ui.layout"
    xmlns:core="sap.ui.core"
    xmlns:table="sap.ui.table"
    xmlns:r="sap.ui.table.rowmodes"
>
    <m:Page id="_IDGenPage1" title="Tendering-App">
        <m:VBox id="_IDGenVBox3" class="sapUiMediumMargin">
            <m:HBox id="_IDGenHBox" justifyContent="SpaceBetween" alignItems="Center">
                <m:Text id="_IDGenText11" text="Document: 20000010 " />
                <m:HBox id="_IDGenHBox1">
                    <m:Button id="_IDGenButton2" text="Save Document" icon="sap-icon://save" type="Transparent" press=".onSaveDocument"/>
                    <m:Button id="_IDGenButton3" text="Print" icon="sap-icon://print" type="Transparent" press=".onPrint"/>
                    <m:Button id="_IDGenButton4" text="Export" icon="sap-icon://download" type="Transparent" press=".onExport"/>
                    <m:Button id="_IDGenButton5" text="Import" icon="sap-icon://upload" type="Transparent" press=".onImport"/>
                    <m:Button id="_IDGenButton6" text="Delete" icon="sap-icon://delete" type="Transparent" press=".onDelete"/>
                </m:HBox>
            </m:HBox>
          <m:HBox id="_IDGenHBox2"  justifyContent="Center" alignItems="Center">
            <m:VBox id="_IDGenVBox9" class="myRectangle" alignItems="Center" justifyContent="Center">
                <m:Text id="_IDGenText12" text="Total Value:" />
            </m:VBox>
            <m:VBox id="_IDGenVBox5" class="myRectangle" alignItems="Center" justifyContent="Center">
                <m:Text id="_IDGenText13" />
            </m:VBox>
            <m:VBox id="_IDGenVBox10" class="myRectangle" alignItems="Center" justifyContent="Center">
                <m:Text id="_IDGenText14" text="SAR"  />
            </m:VBox>
          </m:HBox>
           
        </m:VBox>

        <m:VBox id="_IDGenVBox4" class="sapUiMediumMargin">
            <m:HBox id="_IDGenHBox4" class="sapUiSmallMarginTop" justifyContent="SpaceBetween" alignItems="Center">
                <m:SearchField 
                    id="searchField" 
                    width="80%" 
                    placeholder="Search..." 
                    search=".onSearch" />
                <m:HBox id="_IDGenHBox5">
                    <m:Input 
                        id="groupInput" 
                        type="Number" 
                        width="120px" 
                        placeholder="0"/>
                    <m:Button id="_IDGenButton1" 
                        text="Apply ProfitMargin" 
                        type="Emphasized" 
                        press=".onApplyProfitMargin" />
                </m:HBox>
            </m:HBox>
        </m:VBox>

        <m:VBox id="_IDGenVBox">
         <m:Toolbar id="_IDGenToolbar2">
        <m:Button id="_IDGenButton9" text="Add Main Item" press=".onOpenMainDialog" type="Emphasized"/>
        <!-- <m:Button id="_IDGenButton10" text="Add Sub Item" press=".onOpenSubDialog" type="Emphasized"/> -->
        </m:Toolbar>

            <TreeTable
                id="treeTable"
                rows="{
                    path: '/MainItems',
                    parameters: {
                        arrayNames: ['children']  
                    }
                }"
                selectionMode="Single"
                visibleRowCount="5"
                expandFirstLevel="true">
                 <extension >
                    <m:OverflowToolbar id="_IDGenOverflowToolbar1" style="Clear" class="sapUiMediumMargin">
                        <!-- <m:Title id="title" text="Clothing"/> -->
                        <m:ToolbarSpacer id="_IDGenToolbarSpacer"/>
                        <m:Button id="_IDGenButton15" text="Collapse all" press="onCollapseAll"/>
                        <m:Button id="_IDGenButton16" text="Collapse selection" press="onCollapseSelection"/>
                        <m:Button id="_IDGenButton17" text="Expand first level" press="onExpandFirstLevel"/>
                        <m:Button id="_IDGenButton18" text="Expand selection" press="onExpandSelection"/>
                    </m:OverflowToolbar>
                </extension>
                <columns>
                    <Column id="_IDGenColumn" width="60%">
                        <label><m:Text id="_IDGenText1" text="Item No"/></label>
                        <template>
                            <m:Text id="_IDGenText2" text="{MainItemNo}{SubItemNo}" />
                        </template>
                    </Column>
                    <Column id="_IDGenColumn1" width="60%">
                        <label><m:Text id="_IDGenText3" text="Service No"/></label>
                        <template>
                            <m:Text id="_IDGenText4" text="{MainItemNo}{ServiceNo}" />
                        </template>
                    </Column>
                    <Column id="_IDGenColumn2" width="60%">
                        <label><m:Text id="_IDGenText5" text="Description"/></label>
                        <template>
                            <m:Text id="_IDGenText6" text="{Description}" />
                        </template>
                    </Column>
                    <Column id="_IDGenColumn3" width="60%">
                        <label><m:Text id="_IDGenText7" text="Quantity"/></label>
                        <template>
                            <m:Text id="_IDGenText8" text="{MainItemNo}{Quantity}" />
                        </template>
                    </Column>
                    <Column id="_IDGenColumn4" width="60%">
                        <label><m:Text id="_IDGenText9" text="UOM"/></label>
                        <template>
                            <m:Text id="_IDGenText10" text="{UOM}" />
                        </template>
                    </Column>
                    <Column id="_IDGenColumn6" width="60%">
                        <label><m:Text id="_IDGenText15" text="Formula"/></label>
                        <template>
                            <m:Text id="_IDGenText16" text="{UOM}" />
                        </template>
                    </Column>
                    <Column id="_IDGenColumn7" width="60%">
                        <label><m:Text id="_IDGenText17" text="Parameters"/></label>
                        <template>
                            <m:Text id="_IDGenText18" text="{UOM}" />
                        </template>
                    </Column>
                    <Column id="_IDGenColumn8" width="60%">
                        <label><m:Text id="_IDGenText19" text="AmountPerUnit"/></label>
                        <template>
                            <m:Text id="_IDGenText20" text="{UOM}" />
                        </template>
                    </Column>
                    <Column id="_IDGenColumn9" width="60%">
                        <label><m:Text id="_IDGenText21" text="Currency"/></label>
                        <template>
                            <m:Text id="_IDGenText22" text="{UOM}" />
                        </template>
                    </Column>
                    <Column id="_IDGenColumn10" width="60%">
                        <label><m:Text id="_IDGenText23" text="Total"/></label>
                        <template>
                            <m:Text id="_IDGenText24" text="{UOM}" />
                        </template>
                    </Column>
                    <Column id="_IDGenColumn11" width="60%">
                        <label><m:Text id="_IDGenText25" text="ProfitMargin"/></label>
                        <template>
                            <m:Text id="_IDGenText26" text="{UOM}" />
                        </template>
                    </Column>
                    <Column id="_IDGenColumn12" width="60%">
                        <label><m:Text id="_IDGenText27" text="AmountPerUnitWithProfit"/></label>
                        <template>
                            <m:Text id="_IDGenText28" text="{UOM}" />
                        </template>
                    </Column>
                    <Column id="_IDGenColumn13" width="60%">
                        <label><m:Text id="_IDGenText29" text="TotalWithProfit"/></label>
                        <template>
                            <m:Text id="_IDGenText30" text="{UOM}" />
                        </template>
                    </Column>
                  <Column id="_IDGenColumn14" width="60%">
    <label><m:Text id="_IDGenText31" text="Actions"/></label>
    <template>
        <m:HBox id="_IDGenHBox3">
            <!-- Add SubItem -->
            <m:Button id="_IDGenButton10" icon="sap-icon://add" type="Transparent"
                      tooltip="Add Sub Item"
                      press=".onOpenSubDialogForRow"
                       visible="{= ${children} ? true : false }" />

            <!-- Edit -->
            <m:Button id="_IDGenButton19" icon="sap-icon://edit" type="Transparent"
                      tooltip="Edit"
                      press=".onEditRow" />

            <!-- Delete -->
            <m:Button id="_IDGenButton20" icon="sap-icon://delete" type="Transparent"
                      tooltip="Delete"
                      press=".onDeleteRow" />
        </m:HBox>
    </template>
</Column>

                </columns>
               
            </TreeTable>








            <!-- SubItem Inputs (remains outside footer, toggled by controller) -->
            <m:HBox id="_IDGenHBox7" visible="false" class="sapUiSmallMargin sapUiTinyMarginTop">
                <m:Input id="subItemNo" placeholder="Sub Item No" width="15%"/>
                <m:Input id="subServiceNo" placeholder="Service No" width="15%"/>
                <m:Input id="subDescription" placeholder="Description" width="40%"/>
                <m:Input id="subQuantity" placeholder="Quantity" width="15%"/>
                <m:Input id="subUOM" placeholder="UOM" width="15%"/>
                <m:Button id="_IDGenButton8" text="Add Sub Item" type="Emphasized" press=".onAddSubItem"/>
            </m:HBox>
        </m:VBox>



        <!-- Main Item Dialog -->
    <m:Dialog id="addMainDialog" title="Add Main Item">
        <m:VBox id="_IDGenVBox6" class="sapUiSmallMargin">
            <m:Input id="mainItemNoInput" placeholder="Main Item No"/>
            <m:Input id="mainServiceNoInput" placeholder="Service No"/>
            <m:Input id="mainDescriptionInput" placeholder="Description"/>
            <m:Input id="mainQuantityInput" placeholder="Quantity"/>
            <m:Input id="mainUOMInput" placeholder="UOM"/>
            <m:Input id="mainFormulaInput" placeholder="Formula"/>
            <m:Input id="mainParametersInput" placeholder="Parameters"/>
            
            <m:Input id="mainAmountPerUnitInput" placeholder="AmountPerUnit"/>
            <m:Input id="mainCurrencyInput" placeholder="Currency"/>
            
            <m:Input id="mainTotalInput" placeholder="Total"/>
            <m:Input id="mainProfitMarginInput" placeholder="ProfitMargin"/>
            
            <m:Input id="mainAmountPerUnitWithProfitInput" placeholder="AmountPerUnitWithProfit"/>
            <m:Input id="mainTotalWithProfitInput" placeholder="TotalWithProfit"/>


<!--             
           <m:Input id="mainItemNoInput" placeholder="Main Item No" value="{/newMainItem/MainItemNo}" />
        <m:Input id="mainServiceNoInput" placeholder="Service No" value="{/newMainItem/ServiceNo}" />
        <m:Input id="mainDescriptionInput" placeholder="Description" value="{/newMainItem/Description}" />
        <m:Input id="mainQuantityInput" placeholder="Quantity" value="{/newMainItem/Quantity}" type="Number" />
        <m:Input id="mainUOMInput" placeholder="UOM" value="{/newMainItem/UOM}" />
        <m:Input id="mainFormulaInput" placeholder="Formula" value="{/newMainItem/formula}" />
        <m:Input id="mainParametersInput" placeholder="Parameters" value="{/newMainItem/parameters}" />
        <m:Input id="mainAmountPerUnitInput" placeholder="Amount Per Unit" value="{/newMainItem/AmountPerUnit}" type="Number" />
        <m:Input id="mainCurrencyInput" placeholder="Currency" value="{/newMainItem/currency}" />
        <m:Input id="mainTotalInput" placeholder="Total" value="{/newMainItem/total}" type="Number" />
        <m:Input id="mainProfitMarginInput" placeholder="Profit Margin" value="{/newMainItem/profitMargin}" type="Number" />
        <m:Input id="mainAmountPerUnitWithProfitInput" placeholder="Amount/Unit with Profit" value="{/newMainItem/amountPerUnitWithProfit}" type="Number" />
        <m:Input id="mainTotalWithProfitInput" placeholder="Total With Profit" value="{/newMainItem/totalWithProfit}" type="Number" /> -->
        </m:VBox>
        <m:buttons>
            <m:Button id="_IDGenButton11" text="Add" press=".onAddMainItem"/>
            <m:Button id="_IDGenButton12" text="Cancel" press=".onCloseDialog"/>
        </m:buttons>
    </m:Dialog>

    <!-- Sub Item Dialog -->
    <m:Dialog id="addSubDialog" title="Add Sub Item">
        <m:VBox id="_IDGenVBox7" class="sapUiSmallMargin">
            <m:Input id="parentMainItemNoInput" placeholder="Main Item No (Parent)"/>
            <m:Input id="subItemNoInput" placeholder="Sub Item No"/>
            <m:Input id="subServiceNoInput" placeholder="Service No"/>
            <m:Input id="subDescriptionInput" placeholder="Description"/>
            <m:Input id="subQuantityInput" placeholder="Quantity"/>
            <m:Input id="subUOMInput" placeholder="UOM"/>
        </m:VBox>
        <m:buttons>
            <m:Button id="_IDGenButton13" text="Add" press=".onAddSubItem"/>
            <m:Button id="_IDGenButton14" text="Cancel" press=".onCloseDialog"/>
        </m:buttons>
    </m:Dialog>


       <!-- Main Item Dialog -->
    <!-- <m:Dialog id="addMainDialog" title="Add Main Item">
        <table:Table id="mainItemDialogTable"
                     rows="{/dummy}"
                     visibleRowCount="1"
                     minAutoRowCount="1"
                     width="100%">
            <table:columns>
                <table:Column id="_IDGenColumn6">
                    <table:label><m:Label id="_IDGenLabel2" text="Item No"/></table:label>
                    <table:template><m:Input id="dialogMainItemNo"/></table:template>
                </table:Column>
                <table:Column id="_IDGenColumn7">
                    <table:label><m:Label id="_IDGenLabel3" text="Service No"/></table:label>
                    <table:template><m:Input id="dialogMainServiceNo"/></table:template>
                </table:Column>
                <table:Column id="_IDGenColumn8">
                    <table:label><m:Label id="_IDGenLabel4" text="Description"/></table:label>
                    <table:template><m:Input id="dialogMainDescription"/></table:template>
                </table:Column>
                <table:Column id="_IDGenColumn9">
                    <table:label><m:Label id="_IDGenLabel5" text="Quantity"/></table:label>
                    <table:template><m:Input id="dialogMainQuantity"/></table:template>
                </table:Column>
                <table:Column id="_IDGenColumn10">
                    <table:label><m:Label id="_IDGenLabel6" text="UOM"/></table:label>
                    <table:template><m:Input id="dialogMainUOM"/></table:template>
                </table:Column>
            </table:columns>
        </table:Table>
        <m:buttons>
            <m:Button id="_IDGenButton11" text="Add" press=".onAddMainItem"/>
            <m:Button id="_IDGenButton12" text="Cancel" press=".onCloseDialog"/>
        </m:buttons>
    </m:Dialog>

    
    <m:Dialog id="addSubDialog" title="Add Sub Item">
        <table:Table id="subItemDialogTable"
                     rows="{/dummy}"
                     visibleRowCount="1"
                     minAutoRowCount="1"
                     width="100%">
            <table:columns>
                <table:Column id="_IDGenColumn11">
                    <table:label><m:Label id="_IDGenLabel7" text="Parent Main Item No"/></table:label>
                    <table:template><m:Input id="dialogParentMainItemNo"/></table:template>
                </table:Column>
                <table:Column id="_IDGenColumn12">
                    <table:label><m:Label id="_IDGenLabel8" text="Sub Item No"/></table:label>
                    <table:template><m:Input id="dialogSubItemNo"/></table:template>
                </table:Column>
                <table:Column id="_IDGenColumn13">
                    <table:label><m:Label id="_IDGenLabel9" text="Service No"/></table:label>
                    <table:template><m:Input id="dialogSubServiceNo"/></table:template>
                </table:Column>
                <table:Column id="_IDGenColumn14">
                    <table:label><m:Label id="_IDGenLabel10" text="Description"/></table:label>
                    <table:template><m:Input id="dialogSubDescription"/></table:template>
                </table:Column>
                <table:Column id="_IDGenColumn15">
                    <table:label><m:Label id="_IDGenLabel11" text="Quantity"/></table:label>
                    <table:template><m:Input id="dialogSubQuantity"/></table:template>
                </table:Column>
                <table:Column id="_IDGenColumn16">
                    <table:label><m:Label id="_IDGenLabel12" text="UOM"/></table:label>
                    <table:template><m:Input id="dialogSubUOM"/></table:template>
                </table:Column>
            </table:columns>
        </table:Table>
        <m:buttons>
            <m:Button id="_IDGenButton13" text="Add" press=".onAddSubItem"/>
            <m:Button id="_IDGenButton14" text="Cancel" press=".onCloseDialog"/>
        </m:buttons>
    </m:Dialog> -->
    </m:Page>
</mvc:View>