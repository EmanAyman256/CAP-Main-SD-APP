sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast"],(e,t)=>{"use strict";return e.extend("execution.controller.Home",{onInit:function(){var e=new sap.ui.model.json.JSONModel({DocumentNumber:"",SelectedItemNumber:"",ErrorMessage:"",documentItems:[]});this.getView().setModel(e)},onValueHelpRequest(e){if(!this._oValueHelpDialog){this._oValueHelpDialog=new sap.m.Dialog({title:"Select Sales Order Number",content:[new sap.m.Table({id:this.createId("salesTable"),mode:"SingleSelectMaster",growing:true,growingThreshold:50,columns:[new sap.m.Column({header:new sap.m.Label({text:"Sales Order Number"})}),new sap.m.Column({header:new sap.m.Label({text:"OverallSDProcessStatus"})}),new sap.m.Column({header:new sap.m.Label({text:"CustomerPaymentTerms"})}),new sap.m.Column({header:new sap.m.Label({text:"SoldToParty"})})],items:{path:"/SalesOrders",parameters:{$count:true},template:new sap.m.ColumnListItem({type:"Active",cells:[new sap.m.Text({text:"{SalesOrder}"}),new sap.m.Text({text:"{OverallSDProcessStatus}"}),new sap.m.Text({text:"{CustomerPaymentTerms}"}),new sap.m.Text({text:"{SoldToParty}"})]}),events:{dataReceived:e=>{const t=e.getSource();const s=this.byId("salesTable");const o=s.getItems();const r=e.getParameter("data");console.log("Total items received:",o.length);console.log("Total count from server:",r?.__count||"N/A");if(o.length===0){sap.m.MessageBox.warning("No data found in A_SalesOrder.")}}}}})],beginButton:new sap.m.Button({text:"Confirm",press:e=>{const t=this.byId("salesTable");const s=t.getSelectedItem();if(s){const e=s.getCells()[0].getText();this.byId("salesorderInput").setValue(e);this.getView().getModel().setProperty("/DocumentNumber",e);const t=this.getView().getModel().getProperty("/DocumentNumber");console.log(t);fetch(`/odata/v4/sales-cloud/findItemsBySalesOrder?salesOrder'${t}'`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{const t=JSON.parse(e.value);console.log("Parsed Value:",t);console.log("Items Value:",t.d.results);if(t&&t.d&&t.d.results){const e=t.d.results.map(e=>({SalesOrderItem:e.SalesOrderItem,SalesOrderItemText:e.SalesOrderItemText}));this.getView().getModel().setProperty("/documentItems",e);console.log("Stored documentItems:",e)}else{sap.m.MessageBox.warning("No items found in SalesOrder.")}}).catch(e=>{console.error("Error fetching items:",e);sap.m.MessageBox.error("Error: "+e.message)});this._oValueHelpDialog.close()}}}),endButton:new sap.m.Button({text:"Cancel",press:()=>{this._oValueHelpDialog.close()}})});var t=this.getOwnerComponent().getModel();this._oValueHelpDialog.setModel(t);this.getView().addDependent(this._oValueHelpDialog)}this._oValueHelpDialog.open()},onNextPress:function(){const e=this.getView();const s=e.getModel();const o=e.byId("_IDGenSelect").getSelectedKey();const r=s.getProperty("/DocumentNumber");if(!r){MessageBox.warning("Document Number is required.");return}if(!o){MessageBox.warning("Item Number is required.");return}s.setProperty("/ErrorMessage","");t.show("Navigating to next step with Doc: "+r+", Item: "+o);var a=sap.ui.core.UIComponent.getRouterFor(this);a.navTo("ExecutionOrder",{docNumber:r,itemNumber:o})}})});
//# sourceMappingURL=Home.controller.js.map